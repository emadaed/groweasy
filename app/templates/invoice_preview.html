<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Invoice Preview</title>
    <style nonce="{{ nonce }}">
        body { background: #f8f9fa; margin: 0; padding: 20px; font-family: sans-serif; }
        .preview-container {
            max-width: 900px; margin: 0 auto; background: white; 
            padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .actions { text-align: center; margin: 40px 0; }
        .print-btn { background: #6c757d; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
        .download-btn { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px; }
        @media print { .actions { display: none; } }
    </style>
</head>
<body>
    <div class="preview-container">
        <h2 style="text-align:center; color:#28a745; margin-bottom:30px;">Document Preview</h2>
        {{ html | safe }}
    </div>
    <div class="actions">
        <button id="printBtn" class="print-btn">üñ®Ô∏è Print</button>
        <button id="downloadBtn" class="download-btn">üì• Download PDF</button>
    </div>

    <script nonce="{{ nonce }}">
    document.getElementById('printBtn').addEventListener('click', () => window.print());
    document.getElementById('downloadBtn').addEventListener('click', () => {
        window.location.href = "/invoice/download/{{ data.get('invoice_number', '') }}";
    });
    </script>
</body>
</html>